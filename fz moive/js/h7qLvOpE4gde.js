const urlB64ToUint8Array=e=>{const r=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=atob(r),i=new Uint8Array(t.length);for(let e=0;e<t.length;++e)i[e]=t.charCodeAt(e);return i},check=()=>{if(!("serviceWorker"in navigator))throw new Error("No Service Worker support!");if(!("PushManager"in window))throw new Error("No Push API Support!")},registerServiceWorker=async()=>await navigator.serviceWorker.register("service.js?v=1"),requestNotificationPermission=async()=>{const e=await window.Notification.requestPermission();if("granted"===e&&(document.getElementById("pushbutton").style.display="none",document.getElementById("permissionstatus").style.display="inline"),"granted"!==e)throw new Error("Permission not granted for Notification");return e},pushsubscribe=async()=>{check();const e=await registerServiceWorker();await requestNotificationPermission();try{const r={applicationServerKey:urlB64ToUint8Array("BETtpdaq1ej3LCVtZ1QhUKc-YaF_mp5shWUVm0sxJX-B6F6YYK_tL4Kh5UepeZdmokvHbDzTn39BCFo10oWNsRk"),userVisibleOnly:!0},t=await e.pushManager.subscribe(r),i="save-subscription.php";await fetch(i,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(e){console.log("Error","Something went wrong")}};